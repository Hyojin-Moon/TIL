
## 🔐 SSL 인증서 개념 및 사용법 정리

### 📘 1. SSL / TLS란?

**SSL(Secure Sockets Layer)** 은  
웹 통신(HTTP)에 암호화 계층을 추가하여 데이터의 **기밀성과 무결성**을 보장하는 기술입니다.  
현재는 **TLS(Transport Layer Security)** 가 SSL의 최신 표준으로 사용됩니다.  
즉, “SSL 인증서”는 실제로는 **TLS 인증서**를 의미합니다.

✅ **주요 역할**

| 구분 | 설명 |
|------|------|
| 🔒 암호화 (Encryption) | 클라이언트 ↔ 서버 간 전송되는 데이터를 제3자가 볼 수 없도록 보호 |
| 🧾 인증 (Authentication) | 서버(또는 클라이언트)가 진짜 신뢰할 수 있는 주체임을 증명 |
| 🧠 무결성 (Integrity) | 전송 중 데이터가 위변조되지 않았음을 검증 |

---

### 🌐 2. SSL 인증서란?

SSL 인증서는 **인증 기관(CA, Certificate Authority)** 가 발급하는  
서버 신원 확인용 **디지털 서명 문서**입니다.  
웹사이트가 “나는 이 도메인의 주인이다” 라는 사실을 증명합니다.

📄 **인증서에 포함된 정보**

| 항목 | 설명 |
|------|------|
| 일반 이름 (Common Name) | 인증서가 적용되는 도메인 (예: `xxx.com`) |
| 발급 기관 (Issuer) | 인증서를 발급한 CA (예: NAVER Secure CA, Let’s Encrypt, AWS 등) |
| 유효 기간 | 인증서의 시작일과 만료일 |
| 공개키 (Public Key) | 암호화 통신 시 서버가 사용하는 키 |
| 서명 알고리즘 / 버전 | 암호화 방식 및 보안 수준 명시 |

---

### 🏗️ 3. SSL 통신 과정

아래는 **HTTPS 통신의 기본 흐름**입니다.

1️⃣ **클라이언트 → 서버** : HTTPS 요청  
2️⃣ **서버 → 클라이언트** : SSL 인증서 전달  
3️⃣ **클라이언트** : 인증서 유효성 검증 (CA 서명, 도메인 일치 등)  
4️⃣ **클라이언트** : 세션 키 생성 후 암호화하여 서버에 전달  
5️⃣ **서버** : 개인키(Private Key)로 복호화  
6️⃣ **이후 통신은 대칭키 암호화로 암호화된 상태 유지**

---

### 🧾 4. 인증서 종류

| 종류 | 설명 | 예시 |
|------|------|------|
| DV (Domain Validation) | 도메인 소유 여부만 검증 (자동 발급 가능, 무료/Let’s Encrypt 등) | 개인 블로그, 테스트 서버 |
| OV (Organization Validation) | 조직 실체를 검증 (사업자 등록증 등 필요) | 일반 기업용 서비스 |
| EV (Extended Validation) | 법적 실체 및 운영자까지 심층 검증 | 금융, 결제, 대기업 서비스 |

---

### 🧰 5. SSL 인증서 발급 및 적용 절차

#### (1) CSR (Certificate Signing Request) 생성
공개키(Public Key)와 서버 정보, 도메인 등을 포함한 요청 파일 — **인증서 발급의 출발점**
```bash
openssl req -new -newkey rsa:2048 -nodes -keyout domain.key -out domain.csr
```
(2) CA에 제출 및 검증

CA에서 도메인 소유 확인 (DNS, 이메일, 파일 업로드 방식 등)

(3) 인증서 발급
	•	.crt, .pem, .cer 등의 형태로 인증서 파일 수령
	•	체인 인증서(ca-bundle.crt)도 함께 제공됨

(4) 서버에 설치

Nginx 예시
```
server {
  listen 443 ssl;
  server_name example.com;

  ssl_certificate     /etc/ssl/example.com/fullchain.pem;
  ssl_certificate_key /etc/ssl/example.com/privkey.pem;

  location / {
    proxy_pass http://localhost:3000;
  }
}
```
Apache 예시
```
<VirtualHost *:443>
  SSLEngine on
  SSLCertificateFile /etc/ssl/example.com.crt
  SSLCertificateKeyFile /etc/ssl/example.com.key
  SSLCertificateChainFile /etc/ssl/ca-bundle.crt
</VirtualHost>
```
(5) HTTP → HTTPS 리디렉션
```
server {
  listen 80;
  server_name example.com;
  return 301 https://$host$request_uri;
}
```

---

🧱 6. 인증서 적용 구조별 차이

| 구조 | SSL 적용 위치 | 설명 |
|------|----------------|------|
| **단일 서버 (Node.js 직접 처리)** | `https.createServer()` | 서버 코드에서 직접 인증서 로드 |
| **리버스 프록시 구조 (Nginx 등)** | Nginx / Apache | SSL 종료(TLS Termination) 후 내부 HTTP 통신 |
| **클라우드 / 인그레스 (NCP, AWS, DKOS)** | Load Balancer / Ingress Controller | 인증서 Secret 등록 후 자동 갱신 관리 |

---

🧭 7. SSL 적용 확인 방법

확인 방법	설명
🔒 브라우저 자물쇠 클릭	인증서 정보, 발급자, 만료일 확인 가능
🧪 SSL Labs Test	SSL 구성, 체인, 프로토콜 버전 등 상세 진단
🧩 명령어	openssl s_client -connect example.com:443


---

🔁 8. 자동 갱신 (Let’s Encrypt 예시)

무료 인증서의 경우 보통 90일 유효이므로 자동 갱신 설정이 필수입니다.
```
sudo certbot renew --quiet
```
🧠 cron 또는 systemd timer를 이용해 주기적 실행 가능

---

⚙️ 9. HTTPS 보안 강화 옵션

| 항목 | 설명 | 예시 |
|------|------|------|
| **HSTS (Strict-Transport-Security)** | 브라우저가 항상 HTTPS로 접속하도록 강제 | `Strict-Transport-Security: max-age=31536000; includeSubDomains; preload` |
| **TLS 버전 제한** | 최신 TLS 1.2 이상만 허용 | `ssl_protocols TLSv1.2 TLSv1.3;` |
| **강력한 암호화 스위트 지정** | 약한 암호화 방식 차단 | `ssl_ciphers HIGH:!aNULL:!MD5;` |
| **리디렉션 / 쿠키 보안 설정** | Secure, HttpOnly, SameSite 속성 활용 | `Set-Cookie: session=abc; Secure; HttpOnly; SameSite=Strict` |

---

🧩 10. 실제 예시: mamedene.com

항목	내용
발급 기관	NAVER Secure Certification Authority 1
도메인	mamedene.com
인증서 위치	Naver Cloud VIP / Ingress Controller (TLS Termination)
서버 코드에서 SSL 처리 여부	없음 — 프록시 상위 계층에서 SSL 처리
확인 결과	✅ HTTPS 정상 적용, 유효한 SSL 인증서 존재


---

✅ 요약

SSL 인증서란?
👉 서버 신원을 증명하고 통신을 암호화하는 디지털 증명서

사용 목적
	•	데이터 도청 및 변조 방지
	•	피싱 사이트 방지
	•	사용자 신뢰 확보 및 SEO 향상

적용 위치
	•	직접 서버(Nginx, Node 등)
	•	클라우드 인그레스(VIP, LB 등)

관리 포인트
	•	유효기간 만료 전 갱신
	•	중간 인증서 체인 구성 확인
	•	최신 TLS 버전 사용 및 HSTS 적용

---
